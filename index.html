<!doctype html>
<html lang='en'>
	<head>
	
	</head>
	
	<body>
		Nothing to see here...
	</body>
</html>

<!-- Register Service Worker -->
<script>
	   if (navigator.storage && navigator.storage.persist) {
		navigator.storage.persist().then(granted => {
		    if (granted)
			alert("Storage will not be cleared except by explicit user action");
		    else
			alert("Storage may be cleared by the UA under storage pressure.");
		});
	   } else {
		alert("navigator.storage not found!");
		alert(navigator.storage);
		alert(navigator.storage.persist);
	   }

	if('serviceWorker' in navigator) {
		alert('Service Worker Registered');
		document.getElementById('userAgent').innerHTML += navigator.userAgent;
 		window.addEventListener('load', () => {
			navigator.serviceWorker.register('ServiceWorker.js', {
				scope: '/tensentric/'
			});
		});
	}

	if(self.IndexedDB) {
 		alert('IndexDB Support!');
		var request = self.IndexedDB.open('EXAMPLE_DB', 1);
		request.onsuccess = function(event) {
		    // some sample products data
		    var products = [
		        {id: 1, name: 'Red Men T-Shirt', price: '$3.99'},
		        {id: 2, name: 'Pink Women Shorts', price: '$5.99'},
		        {id: 3, name: 'Nike white Shoes', price: '$300'}
		    ];
		// get database from event
		    var db = event.target.result;
		// create transaction from database
		    var transaction = db.transaction('products', 'readwrite');
		// add success event handleer for transaction
		    // you should also add onerror, onabort event handlers
		    transaction.onsuccess = function(event) {
		        console.log('[Transaction] ALL DONE!');
		    };
		// get store from transaction
		    // returns IDBObjectStore instance
		    var productsStore = transaction.objectStore('products');
		// put products data in productsStore
		    products.forEach(function(product){
		        var db_op_req = productsStore.add(product); // IDBRequest
		    });
		};
	}
</script>
