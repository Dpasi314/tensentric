<!doctype html>
<html lang='en'>
	<head>
	
	</head>
	
	<body>
		Nothing to see here...
	</body>
</html>

<!-- Register Service Worker -->
<script>
	   if (navigator.storage && navigator.storage.persist) {
		navigator.storage.persist().then(granted => {
		    if (granted)
			alert("Storage will not be cleared except by explicit user action");
		    else
			alert("Storage may be cleared by the UA under storage pressure.");
		});
	   } else {
		alert("navigator.storage not found!");
		alert(navigator.storage);
		alert(navigator.storage.persist);
	   }

	if('serviceWorker' in navigator) {
		alert('Service Worker Registered');
 		window.addEventListener('load', () => {
			navigator.serviceWorker.register('ServiceWorker.js', {
				scope: '/tensentric/'
			});
		});
	}

	var indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB;

	var db;
	var request = indexedDB.open("TestDatabase");
	request.onerror = function(evt) {
	  console.log("Database error code: " + evt.target.errorCode);
	};
	request.onsuccess = function(evt) {
	  db = request.result;
	};

	var peopleData = [
	    { name: "John Dow", email: "john@company.com" },
	    { name: "Don Dow", email: "don@company.com" }
	];
	 
	function initDb() {
	    var request = indexedDB.open("PeopleDB", 1);  
	    request.onsuccess = function (evt) {
	        db = request.result;                                                            
	    };
	 
	    request.onerror = function (evt) {
	        console.log("IndexedDB error: " + evt.target.errorCode);
	    };
	 
	    request.onupgradeneeded = function (evt) {                   
	        var objectStore = evt.currentTarget.result.createObjectStore("people", 
	                                     { keyPath: "id", autoIncrement: true });
	 
	        objectStore.createIndex("name", "name", { unique: false });
	        objectStore.createIndex("email", "email", { unique: true });
	 
	        for (i in peopleData) {
	            objectStore.add(peopleData[i]);
	        }
	    };
	}
	var IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
	var transaction = db.transaction("people", IDBTransaction.READ_WRITE);
	var objectStore = transaction.objectStore("people");                    
	var request = objectStore.add({ name: name, email: email });
	request.onsuccess = function (evt) {
	    alert('Success!');
	};

</script>
