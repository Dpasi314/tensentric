<!doctype html>
<html lang='en'>
	<head>
	
	</head>
	
	<body>
		Nothing to see here...
		<div id="result"></div>
	</body>
</html>

<!-- Register Service Worker -->
<script src="wwwroot/pouchdb-7.0.0.min.js"></script>
<script>
	   if (navigator.storage && navigator.storage.persist) {
		navigator.storage.persist().then(granted => {
		    if (granted)
			alert("Storage will not be cleared except by explicit user action");
		    else
			alert("Storage may be cleared by the UA under storage pressure.");
		});
	   } else {
		alert("navigator.storage not found!");
		alert(navigator.storage);
		alert(navigator.storage.persist);
	   }

	if('serviceWorker' in navigator) {
		alert('Service Worker Registered');
 		window.addEventListener('load', () => {
			navigator.serviceWorker.register('ServiceWorker.js', {
				scope: '/tensentric/'
			});
		});
	}

	var db = new PouchDB('test_database');
	function addInfo(pvtKey) {
		db.put({
			_id: 'PatientKey',
			PrivateKey: pvtKey
		}).then(function(response) {
			alert('Added Success!');
		}).catch(function(err) {
			alert(err);
		});
	}

	addInfo('hjfkljghdslkfhglskdf');

	function getInfo(id) {
 		db.get('PatientKey').then(function (result) {
			alert(JSON.stringify(result));
		});
	}
	

</script>
